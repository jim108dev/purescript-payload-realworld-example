// Generated by purs version 0.13.8
"use strict";
var $foreign = require("./foreign.js");
var Control_Applicative = require("../Control.Applicative/index.js");
var Control_Bind = require("../Control.Bind/index.js");
var Data_Bifunctor = require("../Data.Bifunctor/index.js");
var Data_Either = require("../Data.Either/index.js");
var Data_Eq = require("../Data.Eq/index.js");
var Data_Function = require("../Data.Function/index.js");
var Data_Functor = require("../Data.Functor/index.js");
var Data_Generic_Rep = require("../Data.Generic.Rep/index.js");
var Data_Generic_Rep_Show = require("../Data.Generic.Rep.Show/index.js");
var Data_List_Types = require("../Data.List.Types/index.js");
var Data_Maybe = require("../Data.Maybe/index.js");
var Data_Nullable = require("../Data.Nullable/index.js");
var Data_Show = require("../Data.Show/index.js");
var Data_String_CodePoints = require("../Data.String.CodePoints/index.js");
var Data_Symbol = require("../Data.Symbol/index.js");
var Data_Traversable = require("../Data.Traversable/index.js");
var Database_Postgres_SqlValue = require("../Database.Postgres.SqlValue/index.js");
var Effect_Aff = require("../Effect.Aff/index.js");
var Effect_Aff_Compat = require("../Effect.Aff.Compat/index.js");
var Foreign = require("../Foreign/index.js");
var Simple_JSON = require("../Simple.JSON/index.js");
var ConnectionError = (function () {
    function ConnectionError(value0) {
        this.value0 = value0;
    };
    ConnectionError.create = function (value0) {
        return new ConnectionError(value0);
    };
    return ConnectionError;
})();
var ConversionError = (function () {
    function ConversionError(value0) {
        this.value0 = value0;
    };
    ConversionError.create = function (value0) {
        return new ConversionError(value0);
    };
    return ConversionError;
})();
var InternalError = (function () {
    function InternalError(value0) {
        this.value0 = value0;
    };
    InternalError.create = function (value0) {
        return new InternalError(value0);
    };
    return InternalError;
})();
var OperationalError = (function () {
    function OperationalError(value0) {
        this.value0 = value0;
    };
    OperationalError.create = function (value0) {
        return new OperationalError(value0);
    };
    return OperationalError;
})();
var ProgrammingError = (function () {
    function ProgrammingError(value0) {
        this.value0 = value0;
    };
    ProgrammingError.create = function (value0) {
        return new ProgrammingError(value0);
    };
    return ProgrammingError;
})();
var IntegrityError = (function () {
    function IntegrityError(value0) {
        this.value0 = value0;
    };
    IntegrityError.create = function (value0) {
        return new IntegrityError(value0);
    };
    return IntegrityError;
})();
var DataError = (function () {
    function DataError(value0) {
        this.value0 = value0;
    };
    DataError.create = function (value0) {
        return new DataError(value0);
    };
    return DataError;
})();
var NotSupportedError = (function () {
    function NotSupportedError(value0) {
        this.value0 = value0;
    };
    NotSupportedError.create = function (value0) {
        return new NotSupportedError(value0);
    };
    return NotSupportedError;
})();
var QueryCanceledError = (function () {
    function QueryCanceledError(value0) {
        this.value0 = value0;
    };
    QueryCanceledError.create = function (value0) {
        return new QueryCanceledError(value0);
    };
    return QueryCanceledError;
})();
var TransactionRollbackError = (function () {
    function TransactionRollbackError(value0) {
        this.value0 = value0;
    };
    TransactionRollbackError.create = function (value0) {
        return new TransactionRollbackError(value0);
    };
    return TransactionRollbackError;
})();
var readJson = function (dictReadForeign) {
    var $154 = Data_Bifunctor.lmap(Data_Either.bifunctorEither)((function () {
        var $157 = Data_Show.show(Data_List_Types.showNonEmptyList(Foreign.showForeignError));
        return function ($158) {
            return ConversionError.create($157($158));
        };
    })());
    var $155 = Simple_JSON.read(dictReadForeign);
    return function ($156) {
        return $154($155($156));
    };
};
var prefix = function (p) {
    var $159 = Data_Maybe.maybe(false)(function (v) {
        return v === 0;
    });
    var $160 = Data_String_CodePoints.indexOf(p);
    return function ($161) {
        return $159($160($161));
    };
};
var p_ = function (dictIsSqlValue) {
    return Database_Postgres_SqlValue.toSql(dictIsSqlValue);
};
var genericPGError = new Data_Generic_Rep.Generic(function (x) {
    if (x instanceof ConnectionError) {
        return new Data_Generic_Rep.Inl(x.value0);
    };
    if (x instanceof ConversionError) {
        return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(x.value0));
    };
    if (x instanceof InternalError) {
        return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(x.value0)));
    };
    if (x instanceof OperationalError) {
        return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(x.value0))));
    };
    if (x instanceof ProgrammingError) {
        return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(x.value0)))));
    };
    if (x instanceof IntegrityError) {
        return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(x.value0))))));
    };
    if (x instanceof DataError) {
        return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(x.value0)))))));
    };
    if (x instanceof NotSupportedError) {
        return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(x.value0))))))));
    };
    if (x instanceof QueryCanceledError) {
        return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(x.value0)))))))));
    };
    if (x instanceof TransactionRollbackError) {
        return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(x.value0)))))))));
    };
    throw new Error("Failed pattern match at Server.Shared.Persistence.Postgres.Query (line 54, column 1 - line 54, column 52): " + [ x.constructor.name ]);
}, function (x) {
    if (x instanceof Data_Generic_Rep.Inl) {
        return new ConnectionError(x.value0);
    };
    if (x instanceof Data_Generic_Rep.Inr && x.value0 instanceof Data_Generic_Rep.Inl) {
        return new ConversionError(x.value0.value0);
    };
    if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0 instanceof Data_Generic_Rep.Inl)) {
        return new InternalError(x.value0.value0.value0);
    };
    if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0.value0 instanceof Data_Generic_Rep.Inl))) {
        return new OperationalError(x.value0.value0.value0.value0);
    };
    if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inl)))) {
        return new ProgrammingError(x.value0.value0.value0.value0.value0);
    };
    if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inl))))) {
        return new IntegrityError(x.value0.value0.value0.value0.value0.value0);
    };
    if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inl)))))) {
        return new DataError(x.value0.value0.value0.value0.value0.value0.value0);
    };
    if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inl))))))) {
        return new NotSupportedError(x.value0.value0.value0.value0.value0.value0.value0.value0);
    };
    if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0.value0.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inl)))))))) {
        return new QueryCanceledError(x.value0.value0.value0.value0.value0.value0.value0.value0.value0);
    };
    if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && (x.value0.value0.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0.value0.value0.value0.value0.value0.value0 instanceof Data_Generic_Rep.Inr)))))))) {
        return new TransactionRollbackError(x.value0.value0.value0.value0.value0.value0.value0.value0.value0);
    };
    throw new Error("Failed pattern match at Server.Shared.Persistence.Postgres.Query (line 54, column 1 - line 54, column 52): " + [ x.constructor.name ]);
});
var showPGError = new Data_Show.Show(Data_Generic_Rep_Show.genericShow(genericPGError)(Data_Generic_Rep_Show.genericShowSum(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showString))(new Data_Symbol.IsSymbol(function () {
    return "ConnectionError";
})))(Data_Generic_Rep_Show.genericShowSum(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showString))(new Data_Symbol.IsSymbol(function () {
    return "ConversionError";
})))(Data_Generic_Rep_Show.genericShowSum(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showRecord()(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "code";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "column";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "constraint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "dataType";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "detail";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "file";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "hint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalPosition";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalQuery";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "line";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "message";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "position";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "routine";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "schema";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "severity";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "table";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "where_";
}))(Data_Show.showRecordFieldsNil)(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))))(new Data_Symbol.IsSymbol(function () {
    return "InternalError";
})))(Data_Generic_Rep_Show.genericShowSum(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showRecord()(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "code";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "column";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "constraint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "dataType";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "detail";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "file";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "hint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalPosition";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalQuery";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "line";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "message";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "position";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "routine";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "schema";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "severity";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "table";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "where_";
}))(Data_Show.showRecordFieldsNil)(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))))(new Data_Symbol.IsSymbol(function () {
    return "OperationalError";
})))(Data_Generic_Rep_Show.genericShowSum(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showRecord()(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "code";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "column";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "constraint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "dataType";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "detail";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "file";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "hint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalPosition";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalQuery";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "line";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "message";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "position";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "routine";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "schema";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "severity";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "table";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "where_";
}))(Data_Show.showRecordFieldsNil)(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))))(new Data_Symbol.IsSymbol(function () {
    return "ProgrammingError";
})))(Data_Generic_Rep_Show.genericShowSum(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showRecord()(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "code";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "column";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "constraint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "dataType";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "detail";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "file";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "hint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalPosition";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalQuery";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "line";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "message";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "position";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "routine";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "schema";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "severity";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "table";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "where_";
}))(Data_Show.showRecordFieldsNil)(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))))(new Data_Symbol.IsSymbol(function () {
    return "IntegrityError";
})))(Data_Generic_Rep_Show.genericShowSum(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showRecord()(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "code";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "column";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "constraint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "dataType";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "detail";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "file";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "hint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalPosition";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalQuery";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "line";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "message";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "position";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "routine";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "schema";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "severity";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "table";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "where_";
}))(Data_Show.showRecordFieldsNil)(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))))(new Data_Symbol.IsSymbol(function () {
    return "DataError";
})))(Data_Generic_Rep_Show.genericShowSum(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showRecord()(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "code";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "column";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "constraint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "dataType";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "detail";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "file";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "hint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalPosition";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalQuery";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "line";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "message";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "position";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "routine";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "schema";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "severity";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "table";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "where_";
}))(Data_Show.showRecordFieldsNil)(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))))(new Data_Symbol.IsSymbol(function () {
    return "NotSupportedError";
})))(Data_Generic_Rep_Show.genericShowSum(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showRecord()(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "code";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "column";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "constraint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "dataType";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "detail";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "file";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "hint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalPosition";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalQuery";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "line";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "message";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "position";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "routine";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "schema";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "severity";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "table";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "where_";
}))(Data_Show.showRecordFieldsNil)(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))))(new Data_Symbol.IsSymbol(function () {
    return "QueryCanceledError";
})))(Data_Generic_Rep_Show.genericShowConstructor(Data_Generic_Rep_Show.genericShowArgsArgument(Data_Show.showRecord()(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "code";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "column";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "constraint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "dataType";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "detail";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "file";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "hint";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalPosition";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "internalQuery";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "line";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "message";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "position";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "routine";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "schema";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "severity";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "table";
}))(Data_Show.showRecordFieldsCons(new Data_Symbol.IsSymbol(function () {
    return "where_";
}))(Data_Show.showRecordFieldsNil)(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))(Data_Show.showString))))(new Data_Symbol.IsSymbol(function () {
    return "TransactionRollbackError";
})))))))))))));
var eqPGError = new Data_Eq.Eq(function (x) {
    return function (y) {
        if (x instanceof ConnectionError && y instanceof ConnectionError) {
            return x.value0 === y.value0;
        };
        if (x instanceof ConversionError && y instanceof ConversionError) {
            return x.value0 === y.value0;
        };
        if (x instanceof InternalError && y instanceof InternalError) {
            return x.value0.code === y.value0.code && x.value0.column === y.value0.column && x.value0.constraint === y.value0.constraint && x.value0.dataType === y.value0.dataType && x.value0.detail === y.value0.detail && x.value0.file === y.value0.file && x.value0.hint === y.value0.hint && x.value0.internalPosition === y.value0.internalPosition && x.value0.internalQuery === y.value0.internalQuery && x.value0.line === y.value0.line && x.value0.message === y.value0.message && x.value0.position === y.value0.position && x.value0.routine === y.value0.routine && x.value0.schema === y.value0.schema && x.value0.severity === y.value0.severity && x.value0.table === y.value0.table && x.value0.where_ === y.value0.where_;
        };
        if (x instanceof OperationalError && y instanceof OperationalError) {
            return x.value0.code === y.value0.code && x.value0.column === y.value0.column && x.value0.constraint === y.value0.constraint && x.value0.dataType === y.value0.dataType && x.value0.detail === y.value0.detail && x.value0.file === y.value0.file && x.value0.hint === y.value0.hint && x.value0.internalPosition === y.value0.internalPosition && x.value0.internalQuery === y.value0.internalQuery && x.value0.line === y.value0.line && x.value0.message === y.value0.message && x.value0.position === y.value0.position && x.value0.routine === y.value0.routine && x.value0.schema === y.value0.schema && x.value0.severity === y.value0.severity && x.value0.table === y.value0.table && x.value0.where_ === y.value0.where_;
        };
        if (x instanceof ProgrammingError && y instanceof ProgrammingError) {
            return x.value0.code === y.value0.code && x.value0.column === y.value0.column && x.value0.constraint === y.value0.constraint && x.value0.dataType === y.value0.dataType && x.value0.detail === y.value0.detail && x.value0.file === y.value0.file && x.value0.hint === y.value0.hint && x.value0.internalPosition === y.value0.internalPosition && x.value0.internalQuery === y.value0.internalQuery && x.value0.line === y.value0.line && x.value0.message === y.value0.message && x.value0.position === y.value0.position && x.value0.routine === y.value0.routine && x.value0.schema === y.value0.schema && x.value0.severity === y.value0.severity && x.value0.table === y.value0.table && x.value0.where_ === y.value0.where_;
        };
        if (x instanceof IntegrityError && y instanceof IntegrityError) {
            return x.value0.code === y.value0.code && x.value0.column === y.value0.column && x.value0.constraint === y.value0.constraint && x.value0.dataType === y.value0.dataType && x.value0.detail === y.value0.detail && x.value0.file === y.value0.file && x.value0.hint === y.value0.hint && x.value0.internalPosition === y.value0.internalPosition && x.value0.internalQuery === y.value0.internalQuery && x.value0.line === y.value0.line && x.value0.message === y.value0.message && x.value0.position === y.value0.position && x.value0.routine === y.value0.routine && x.value0.schema === y.value0.schema && x.value0.severity === y.value0.severity && x.value0.table === y.value0.table && x.value0.where_ === y.value0.where_;
        };
        if (x instanceof DataError && y instanceof DataError) {
            return x.value0.code === y.value0.code && x.value0.column === y.value0.column && x.value0.constraint === y.value0.constraint && x.value0.dataType === y.value0.dataType && x.value0.detail === y.value0.detail && x.value0.file === y.value0.file && x.value0.hint === y.value0.hint && x.value0.internalPosition === y.value0.internalPosition && x.value0.internalQuery === y.value0.internalQuery && x.value0.line === y.value0.line && x.value0.message === y.value0.message && x.value0.position === y.value0.position && x.value0.routine === y.value0.routine && x.value0.schema === y.value0.schema && x.value0.severity === y.value0.severity && x.value0.table === y.value0.table && x.value0.where_ === y.value0.where_;
        };
        if (x instanceof NotSupportedError && y instanceof NotSupportedError) {
            return x.value0.code === y.value0.code && x.value0.column === y.value0.column && x.value0.constraint === y.value0.constraint && x.value0.dataType === y.value0.dataType && x.value0.detail === y.value0.detail && x.value0.file === y.value0.file && x.value0.hint === y.value0.hint && x.value0.internalPosition === y.value0.internalPosition && x.value0.internalQuery === y.value0.internalQuery && x.value0.line === y.value0.line && x.value0.message === y.value0.message && x.value0.position === y.value0.position && x.value0.routine === y.value0.routine && x.value0.schema === y.value0.schema && x.value0.severity === y.value0.severity && x.value0.table === y.value0.table && x.value0.where_ === y.value0.where_;
        };
        if (x instanceof QueryCanceledError && y instanceof QueryCanceledError) {
            return x.value0.code === y.value0.code && x.value0.column === y.value0.column && x.value0.constraint === y.value0.constraint && x.value0.dataType === y.value0.dataType && x.value0.detail === y.value0.detail && x.value0.file === y.value0.file && x.value0.hint === y.value0.hint && x.value0.internalPosition === y.value0.internalPosition && x.value0.internalQuery === y.value0.internalQuery && x.value0.line === y.value0.line && x.value0.message === y.value0.message && x.value0.position === y.value0.position && x.value0.routine === y.value0.routine && x.value0.schema === y.value0.schema && x.value0.severity === y.value0.severity && x.value0.table === y.value0.table && x.value0.where_ === y.value0.where_;
        };
        if (x instanceof TransactionRollbackError && y instanceof TransactionRollbackError) {
            return x.value0.code === y.value0.code && x.value0.column === y.value0.column && x.value0.constraint === y.value0.constraint && x.value0.dataType === y.value0.dataType && x.value0.detail === y.value0.detail && x.value0.file === y.value0.file && x.value0.hint === y.value0.hint && x.value0.internalPosition === y.value0.internalPosition && x.value0.internalQuery === y.value0.internalQuery && x.value0.line === y.value0.line && x.value0.message === y.value0.message && x.value0.position === y.value0.position && x.value0.routine === y.value0.routine && x.value0.schema === y.value0.schema && x.value0.severity === y.value0.severity && x.value0.table === y.value0.table && x.value0.where_ === y.value0.where_;
        };
        return false;
    };
});
var convertError = function (err) {
    var convert = function (s) {
        var $127 = prefix("0A")(s);
        if ($127) {
            return NotSupportedError.create;
        };
        var $128 = prefix("20")(s) || prefix("21")(s);
        if ($128) {
            return ProgrammingError.create;
        };
        var $129 = prefix("22")(s);
        if ($129) {
            return DataError.create;
        };
        var $130 = prefix("23")(s);
        if ($130) {
            return IntegrityError.create;
        };
        var $131 = prefix("24")(s) || prefix("25")(s);
        if ($131) {
            return InternalError.create;
        };
        var $132 = prefix("26")(s) || (prefix("27")(s) || prefix("28")(s));
        if ($132) {
            return OperationalError.create;
        };
        var $133 = prefix("2B")(s) || (prefix("2D")(s) || prefix("2F")(s));
        if ($133) {
            return InternalError.create;
        };
        var $134 = prefix("34")(s);
        if ($134) {
            return OperationalError.create;
        };
        var $135 = prefix("38")(s) || (prefix("39")(s) || prefix("3B")(s));
        if ($135) {
            return InternalError.create;
        };
        var $136 = prefix("3D")(s) || prefix("3F")(s);
        if ($136) {
            return ProgrammingError.create;
        };
        var $137 = prefix("40")(s);
        if ($137) {
            return TransactionRollbackError.create;
        };
        var $138 = prefix("42")(s) || prefix("44")(s);
        if ($138) {
            return ProgrammingError.create;
        };
        var $139 = s === "57014";
        if ($139) {
            return QueryCanceledError.create;
        };
        var $140 = prefix("5")(s);
        if ($140) {
            return OperationalError.create;
        };
        var $141 = prefix("F")(s);
        if ($141) {
            return InternalError.create;
        };
        var $142 = prefix("H")(s);
        if ($142) {
            return OperationalError.create;
        };
        var $143 = prefix("P")(s);
        if ($143) {
            return InternalError.create;
        };
        var $144 = prefix("X")(s);
        if ($144) {
            return InternalError.create;
        };
        return Data_Function["const"](new ConnectionError(s));
    };
    var v = Data_Nullable.toMaybe($foreign.ffiSQLState(err));
    if (v instanceof Data_Maybe.Nothing) {
        return Data_Maybe.Nothing.value;
    };
    if (v instanceof Data_Maybe.Just) {
        return Data_Maybe.Just.create(convert(v.value0)($foreign.ffiErrorDetail(err)));
    };
    throw new Error("Failed pattern match at Server.Shared.Persistence.Postgres.Query (line 80, column 20 - line 82, column 64): " + [ v.constructor.name ]);
};
var postProcessor = {
    nullableLeft: (function () {
        var $162 = Data_Functor.map(Data_Maybe.functorMaybe)(Data_Either.Left.create);
        return function ($163) {
            return Data_Nullable.toNullable($162(convertError($163)));
        };
    })(),
    right: Data_Either.Right.create
};
var query = function (decode) {
    return function (v) {
        return function (params) {
            return function (client) {
                return Control_Bind.bind(Effect_Aff.bindAff)(Effect_Aff_Compat.fromEffectFnAff($foreign.ffiQuery(postProcessor)(v)(params)(client)))(function (rows) {
                    return Control_Applicative.pure(Effect_Aff.applicativeAff)(Control_Bind.bind(Data_Either.bindEither)(rows)(Data_Traversable.traverse(Data_Traversable.traversableArray)(Data_Either.applicativeEither)(decode)));
                });
            };
        };
    };
};
var query_ = function (decode) {
    return function (v) {
        return function (client) {
            return Control_Bind.bind(Effect_Aff.bindAff)(Effect_Aff_Compat.fromEffectFnAff($foreign.ffiQuery_(postProcessor)(v)(client)))(function (rows) {
                return Control_Applicative.pure(Effect_Aff.applicativeAff)(Control_Bind.bind(Data_Either.bindEither)(rows)(Data_Traversable.traverse(Data_Traversable.traversableArray)(Data_Either.applicativeEither)(decode)));
            });
        };
    };
};
module.exports = {
    p_: p_,
    postProcessor: postProcessor,
    ConnectionError: ConnectionError,
    ConversionError: ConversionError,
    InternalError: InternalError,
    OperationalError: OperationalError,
    ProgrammingError: ProgrammingError,
    IntegrityError: IntegrityError,
    DataError: DataError,
    NotSupportedError: NotSupportedError,
    QueryCanceledError: QueryCanceledError,
    TransactionRollbackError: TransactionRollbackError,
    convertError: convertError,
    prefix: prefix,
    query: query,
    query_: query_,
    readJson: readJson,
    eqPGError: eqPGError,
    genericPGError: genericPGError,
    showPGError: showPGError,
    ffiSQLState: $foreign.ffiSQLState,
    ffiErrorDetail: $foreign.ffiErrorDetail,
    ffiQuery: $foreign.ffiQuery,
    ffiQuery_: $foreign.ffiQuery_
};
