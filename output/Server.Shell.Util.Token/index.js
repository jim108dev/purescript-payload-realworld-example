// Generated by purs version 0.13.8
"use strict";
var Control_Error_Util = require("../Control.Error.Util/index.js");
var Data_Functor = require("../Data.Functor/index.js");
var Effect = require("../Effect/index.js");
var Effect_Aff = require("../Effect.Aff/index.js");
var Effect_Class = require("../Effect.Class/index.js");
var Node_Simple_Jwt = require("../Node.Simple.Jwt/index.js");
var Simple_JSON = require("../Simple.JSON/index.js");
var encode = function (secret) {
    return function (userId) {
        return Effect_Class.liftEffect(Effect_Aff.monadEffectAff)(Data_Functor.map(Effect.functorEffect)(Node_Simple_Jwt.toString)(Node_Simple_Jwt.encode(Simple_JSON.writeForeignInt)(secret)(Node_Simple_Jwt.HS256.value)(userId)));
    };
};
var decode = function (secret) {
    return function (token) {
        return Effect_Class.liftEffect(Effect_Aff.monadEffectAff)(Data_Functor.map(Effect.functorEffect)(Control_Error_Util.hush)(Node_Simple_Jwt.decode(Simple_JSON.readInt)(secret)(Node_Simple_Jwt.fromString(token))));
    };
};
var mkHandle = function (secret) {
    return {
        encode: encode(secret),
        decode: decode(secret)
    };
};
module.exports = {
    mkHandle: mkHandle,
    encode: encode,
    decode: decode
};
